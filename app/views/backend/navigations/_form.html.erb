<script src="http://123.57.42.111/kindeditor/kindeditor-min.js"></script>
<div class="col-lg-6">
    <form role="form">
        <div class="form-group">
            <label>平台标题</label>
            <%= f.text_field :name, :class => "form-control" ,:placeholder =>  "Enter name", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>平台省份</label>
            <%= f.select :province_id, Province.all.collect { |p| [p.name, p.id]  } ,{},{:class => "form-control"} %>
        </div>

<!--         <div class="form-group">
            <label>文章图片</label>
            <input type="file" name="banner[pic]" id="banner_pic">
        </div> -->
        <div class="form-group">
            <label>平台摘要</label>
            <%= f.text_area :abstract, required: false, input_html: {required: true, class: 'span12'} %>
        </div>
        <button type="submit" class="btn btn-default" id="send">Submit Button</button>
        <button type="reset" class="btn btn-default">Reset Button</button>
    </form>
</div>

<script type="text/javascript">
KindEditor.ready(function(K) {
  K.create('#navigation_abstract', {
    width: "120%",
    allowFileManager: true,
    uploadJson: '/kindeditor/upload',
    fileManagerJson: '/kindeditor/filemanager'
  });
});
$(function(){
       $("input[error='is']").each(function(){
           var $required = $('<strong  style="color: red;font-size: 12px;"></strong>');
           $(this).parent().append($required);
       });
        //文本框失去焦点后
       $("input[error='is']").blur(function(){
            var $parent = $(this).parent();
            $parent.find(".formtips").remove();
            if( $(this).is('#navigation_name') ){
                   if( this.value==""){
                    $(this).parent().removeClass().addClass("form-group has-error");
                       var errorMsg = '平台标题不能为空';
                       $parent.append('<span class="formtips onError" style="color: red;font-size: 12px;">'+errorMsg+'</span>');
                   }else{
                       $(this).parent().removeClass().addClass("form-group has-success");
                   }
            }
       }).keyup(function(){
          $(this).triggerHandler("blur");
       }).focus(function(){
            $(this).triggerHandler("blur");
       });//end blur
 
        
       //提交，最终验证。
        $('#send').click(function(){
               $("input[error='is']").trigger('blur');
               var numError = $('form .onError').length;
               if(numError){
                alert("请输入正确信息");
                   return false;
               }
        });
})
</script>