<script src="http://123.57.42.111/kindeditor/kindeditor-min.js"></script>
<div class="col-lg-6">
    <form role="form">
        <div class="form-group">
            <label>平台标题</label>
            <%= f.text_field :name, :class => "form-control" ,:placeholder =>  "平台标题", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>平台省份</label>
            <%= f.select :province_id, Province.all.collect { |p| [p.name, p.id]  } ,{},{:class => "form-control"} %>
        </div>
        <div class="form-group">
            <label>平台考察</label>
            <%= f.select :investigate_id, Investigate.all.collect { |k| [k.name, k.id]  } ,{},{:class => "form-control"} %>
        </div>
        <div class="form-group">
            <label>上线时间</label>
            <%= f.select :online_time, Line.all.collect { |s| [s.name, s.id]  } ,{},{:class => "form-control"} %>
        </div>
        <div class="form-group">
            <label>问题平台</label>
            <%= f.select :problem_id, Problem.all.collect { |w| [w.name, w.id]  } ,{},{:class => "form-control"} %>
        </div>
        
        <div class="form-group">
            <label>自动投标&nbsp;&nbsp;&nbsp;</label>
            <label>
                <%= f.radio_button :auto_bidding , "1", :checked => 'checked' %>支持&nbsp;&nbsp;&nbsp;
            </label>
            <label>
                <%= f.radio_button :auto_bidding ,"2", :value => '2' %>不支持
            </label>
        </div>
        <div class="form-group">
            <label>热点平台&nbsp;&nbsp;&nbsp;</label>
            <label>
                <%= f.radio_button :hot , "1", :checked => 'checked' %>是&nbsp;&nbsp;&nbsp;
            </label>
            <label>
                <%= f.radio_button :hot ,"2", :value => '2' %>否
            </label>
        </div>
        <div class="form-group">
            <label>LOGO</label>
            <%= f.file_field :logo %>
            <%= f.hidden_field :logo_cache %>
            <%= image_tag(@navigation.logo_url)  if @navigation.logo.present? %>
        </div>

        <div class="form-group">
            <label>平台连接</label>
            <%= f.text_field :name_url, :class => "form-control" ,:placeholder =>  "平台连接", :error =>'is' %>
        </div>
        
        <div class="form-group">
            <label>平均收益</label>
            <%= f.text_field :average_income, :class => "form-control" ,:placeholder =>  "平均收益", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>注册资金</label>
            <%= f.text_field :registered_capital, :class => "form-control" ,:placeholder =>  "注册资金", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>平台所在地区</label>
            <%= f.text_field :area, :class => "form-control" ,:placeholder =>  "平台所在地区", :error =>'is' %>
        </div>
        
        <div class="form-group">
            <label>详细收益利率</label>
            <%= f.text_field :with_income, :class => "form-control" ,:placeholder =>  "详细收益利率", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>投资期限</label>
            <%= f.text_field :investment_period, :class => "form-control" ,:placeholder =>  "投资期限", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>债权转让</label>
            <%= f.text_field :creditor, :class => "form-control" ,:placeholder =>  "债权转让", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>资金托管</label>
            <%= f.text_field :trust_funds, :class => "form-control" ,:placeholder =>  "资金托管", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>投标保障</label>
            <%= f.text_field :tender_guarantee, :class => "form-control" ,:placeholder =>  "投标保障", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>保障模式</label>
            <%= f.text_field :security_mode, :class => "form-control" ,:placeholder =>  "保障模式", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>担保机构</label>
            <%= f.text_field :guarantee_agency, :class => "form-control" ,:placeholder =>  "担保机构", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>管理费</label>
            <%= f.text_field :management_fee, :class => "form-control" ,:placeholder =>  "管理费", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>充值费</label>
            <%= f.text_field :prepaid_fee, :class => "form-control" ,:placeholder =>  "充值费", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>提现费</label>
            <%= f.text_field :withdrawal_fee, :class => "form-control" ,:placeholder =>  "提现费", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>VIP费用</label>
            <%= f.text_field :vip_fee, :class => "form-control" ,:placeholder =>  "VIP费用", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>转让费用</label>
            <%= f.text_field :transfer_fee, :class => "form-control" ,:placeholder =>  "转让费用", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>支付方式</label>
            <%= f.text_field :method_payment, :class => "form-control" ,:placeholder =>  "支付方式", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>联系地址</label>
            <%= f.text_field :address, :class => "form-control" ,:placeholder =>  "联系地址", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>400电话</label>
            <%= f.text_field :free_phone, :class => "form-control" ,:placeholder =>  "400电话", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>公司电话</label>
            <%= f.text_field :phone, :class => "form-control" ,:placeholder =>  "公司电话", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>公司传真</label>
            <%= f.text_field :fax, :class => "form-control" ,:placeholder =>  "公司传真", :error =>'is' %>
        </div>
        <div class="form-group">
            <label>服务邮箱</label>
            <%= f.text_field :mail, :class => "form-control" ,:placeholder =>  "服务邮箱", :error =>'is' %>
        </div>


<!--         <div class="form-group">
            <label>文章图片</label>
            <input type="file" name="banner[pic]" id="banner_pic">
        </div> -->
        <div class="form-group">
            <label>平台摘要</label>
            <%= f.text_area :abstract, required: false, input_html: {required: true, class: 'span12'} %>
        </div>
        <button type="submit" class="btn btn-outline btn-primary" id="send">提交</button>
        <button type="reset" class="btn btn-outline btn-primary">重置</button>
    </form>
</div>

<script type="text/javascript">
KindEditor.ready(function(K) {
  K.create('#navigation_abstract', {
    width: "120%",
    allowFileManager: true,
    uploadJson: '/kindeditor/upload',
    fileManagerJson: '/kindeditor/filemanager'
  });
});
$(function(){
       $("input[error='is']").each(function(){
           var $required = $('<strong  style="color: red;font-size: 12px;"></strong>');
           $(this).parent().append($required);
       });
        //文本框失去焦点后
       $("input[error='is']").blur(function(){
            var $parent = $(this).parent();
            $parent.find(".formtips").remove();
            if( $(this).is('#navigation_name') ){
                   if( this.value==""){
                    $(this).parent().removeClass().addClass("form-group has-error");
                       var errorMsg = '平台标题不能为空';
                       $parent.append('<span class="formtips onError" style="color: red;font-size: 12px;">'+errorMsg+'</span>');
                   }else{
                       $(this).parent().removeClass().addClass("form-group has-success");
                   }
            }
       }).keyup(function(){
          $(this).triggerHandler("blur");
       }).focus(function(){
            $(this).triggerHandler("blur");
       });//end blur
 
        
       //提交，最终验证。
        $('#send').click(function(){
               $("input[error='is']").trigger('blur');
               var numError = $('form .onError').length;
               if(numError){
                alert("请输入正确信息");
                   return false;
               }
        });
})
</script>